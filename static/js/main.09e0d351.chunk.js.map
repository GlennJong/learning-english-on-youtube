{"version":3,"sources":["constant/color.js","components/GlobalStyle/index.js","store/configData.js","components/ConfigGetter/index.js","components/MobileGuideMask/index.js","store/guideStatus.js","components/HowToUseBoard/index.js","interface/Main/index.js","utils/useCaptionGetter.js","components/SoundIcon/index.js","components/ToggleButton/index.js","components/ToggleSlider/index.js","components/PrimaryButton/index.js","components/Player/index.js","interface/PlayerPage/PlayerTitle.js","interface/PlayerPage/PlayerController.js","store/wordLibrary.js","interface/PlayerPage/SentenceItem.js","interface/PlayerPage/SentenceSection.js","interface/PlayerPage/PlayerSection.js","interface/PlayerPage/EmptyHint.js","interface/PlayerPage/index.js","store/videoData.js","interface/HomePage/InputerSection.js","utils/useYoutubeIFrameApi.js","components/VideoItem/index.js","interface/HomePage/index.js","utils/useTranslateGetter.js","interface/BookPage/WordItem.js","interface/BookPage/WordSection.js","interface/BookPage/WordLibrarySection.js","interface/BookPage/index.js","components/InputItem/index.js","interface/ConfigPage/index.js","interface/BottomMenu/index.js","App.js","reportWebVitals.js","index.js"],"names":["color","primary","secondary","thirdary","pureBlack","black","dark","normal","light","pureWhite","white","gray","gradient","background","blue","css","fontFamily","GlobalStyle","createGlobalStyle","storageTranslatorKey","window","localStorage","getItem","storageYoutubeKey","history","replaceState","document","title","location","origin","configData","createSlice","name","initialState","reducers","updateTranslatorKey","state","action","key","translatorKey","payload","setItem","updateYoutubeKey","youtubeKey","ConfigGetter","useSelector","dispatch","useDispatch","useEffect","value","query","queryString","parse","search","azure","console","log","actions","youtube","handleSaveYoutubeKey","bounceAnimation","keyframes","Root","styled","div","show","Content","Title","MobileGuideMask","useState","setShow","handleDetectDevice","isDesktop","innerWidth","addEventListener","className","size","updateLocalStorage","data","JSON","stringify","storeData","guideStatus","hideGuide","showGuide","opts","playerVars","autoplay","playsinline","fs","hide","moveOut","PlayerWrapper","Player","Button","button","HowToUseBoard","setHide","setMoveOut","videoId","onClick","setTimeout","Interface","children","getCaptionList","ajax_response","xmlDoc","DOMParser","parseFromString","tracks","getTrackContent","node","getAttribute","includes","getElementsByTagName","length","i","childNodes","caption","push","error","getCaption","captions","decodeEntities","encodedString","translate","replace","match","entity","numStr","num","parseInt","String","fromCharCode","getTranscriptContent","start","dur","content","innerHTML","alert","handleFetchYoutubeCaption","id","lang","url","Promise","resolve","reject","fetch","method","then","res","text","catch","handleFetchYoutubeCaptionList","status","err","checkYoutubeCaptionAvailiable","a","captionList","currentCaptionList","result","active","ToggleButton","props","setActive","e","event","ToggleSlider","forwardRef","ref","rootRef","useRef","handleOpenSlider","current","classList","add","handleCloseSlider","remove","handleToggleSlider","contains","open","close","toggle","PrimaryButton","YoutubePlayer","onReady","video","setVideo","item","target","getVideoData","duration","getDuration","playAnimations","Math","random","pauseAnimations","play","map","animation","SoundIcon","p","PlayerTitle","PlayerController","player","onProgress","progressBarRef","progressTouchMoveRef","timerRef","handleSyncPlayTime","timer","setInterval","handleUpdateProgress","getCurrentTime","handleDeSyncPlayTime","clearInterval","count","percent","min","max","style","width","sync","deSync","seekTo","Progress","onTouchStart","onTouchMove","currentTarget","getBoundingClientRect","progressOffsetX","x","progressWidth","clientX","touches","onTouchEnd","currentDateTime","Date","forEach","timestamp","wordLibrary","updateItemToCurrentData","currentData","index","findIndex","splice","addItemToCurrentData","removeItemFromCurrentData","archiveCurrentDataToLibrary","currentLibrary","libraryData","timestampIndex","words","child","saveToLibrary","clearCurrentData","updateLibraryData","li","PlayButton","middle","Sentence","WordButton","SentenceItem","str","onReplayClick","onWordClick","handleClickToMarkWord","word","dataset","data-sec","split","type","data-word","SentenceSection","sentenceData","setSentenceData","sentenceDataRef","handleAddItem","sec","Number","end","spot","handleGetCurrentCaption","handleClickWordButton","handleAddWordData","full","handleRemoveWordData","addItemBySec","Hint","src","alt","List","ul","Application","PlayerHead","ControllerWrapper","PauseMask","SentenceWrapper","ButtonWrapper","rotationAnimation","MainButton","PlayerToggleButton","PlayerSection","playerSliderRef","controllerSliderRef","appRef","playerRef","listRef","controllerRef","setPlay","finish","setFinish","ready","setReady","videoData","setVideoData","setResult","captionData","currentCaptionData","useCaptionGetter","MainButtonStatus","useMemo","handleVideoPlay","playVideo","handleVideoPause","pauseVideo","updateFinishTimer","clearTimeout","delta","disabled","handleVideoReplay","time","scrollHeight","offsetHeight","scrollTop","handleSaveCurrentTimeData","EmptyHint","Page","PlayerPage","currentPage","clearVideoId","updateVideoId","updateVideoHistory","updateSearchResult","InputWrap","Msg","Input","input","ButtonWrap","InputerSection","onResult","inputRef","message","setMessage","checkYoutubeType","indexOf","getVideoId","searchByKeyword","results","keyword","axios","get","filterVideoHasCaption","items","_","ampersandPosition","substring","onChange","video_id","handleCheckUrlAvailiable","placeholder","useYoutubeIFrameApi","setData","container","createElement","display","body","append","YouTubeIframeLoader","load","yt","events","ytData","cover","getYoutubeData","destroy","getElementById","removeChild","PlaceHolder","VideoItem","HeadingTools","HistorySection","SearchSection","NotFound","HomePage","onIdReady","currentId","applyVideoData","currentHistory","reduceHistory","slice","addVideoToHistoryList","reverse","handleGetTranslate","headers","json","useTranslatGetter","Word","CheckButton","check","CheckMask","Note","WordItem","advance","onUpdate","NoteRef","setCheck","isTranslating","setIsTranslating","handleSaveNote","note","onFocus","defaultValue","translations","WordBox","save","Item","WordSection","isSaved","setIsSaved","wordData","handleUpdateWordContent","Wrapper","WordLibrarySection","collectionData","collection","j","collectionIndex","wordIndex","Head","Sidebar","LibraryToggleButton","BookPage","openLibrary","setOpenLibrary","Label","Wrap","Inputer","frame","InputItem","label","inputerRef","handleSaveInputer","ConfigPage","MenuButton","BottomMenu","onButtonClick","handleClickMenuButton","data-current","App","setCurrentPage","page","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","reducer","combineReducers","store","createStore","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.09e0d351.chunk.js","sourcesContent":["import { css } from 'styled-components';\n\nexport const color = {\n\n  primary: 'hsl(348, 88%, 65%)',\n  secondary: 'hsl(340, 83%, 65%)',\n  thirdary: 'hsl(334, 77%, 65%)',\n\n  pureBlack: '#000',\n\n  black: {\n    dark: 'hsl(246, 19%, 22%)',\n    normal: 'hsl(248, 17%, 25%)',\n    light: 'hsl(248, 15%, 28%)',\n  },\n\n  pureWhite: '#FFF',\n\n  white: {\n    dark: 'hsl(204, 86%, 85%)',\n    normal: 'hsl(204, 86%, 92%)'\n  },\n  \n  gray: {\n    normal: 'hsl(237, 10%, 63%)'\n  }\n}\n\nexport const gradient = {\n  background: `linear-gradient(0deg, ${color.black.dark} 0%, ${color.black.normal} 100%)`,\n  primary: `linear-gradient(45deg, ${color.primary} 0%, ${color.secondary} 50%, ${color.thirdary} 100%)`,\n  blue: css`\n    background-color: #0093E9;\n    background-image: linear-gradient(to top, #30cfd0 0%, #330867 100%);\n  `\n}","import { createGlobalStyle } from 'styled-components';\nimport { gradient } from '../../constant/color';\nconst fontFamily = `'Pingfang TC', '微軟正黑體', 'Microsoft JhengHei', sans-serif`;\n\nconst GlobalStyle = createGlobalStyle`\n    body {\n        margin: 0;\n        font-family: ${fontFamily};\n        font-weight: 400;\n        font-size: 16px;\n        background: ${gradient.background};\n        background-size: 100% 100%;\n        width: 100vw;\n        height: 100vh;\n    }\n    #app {\n        display: flex;\n        flex-direction: column;\n    }\n    ul {\n        padding-inline-start: 0;\n        margin-block-start: 0;\n        margin-block-end: 0;\n        list-style-type: none;\n    }\n    a {\n        text-decoration: none;\n        cursor: pointer;\n        color: currentColor;\n    }\n    button {\n        outline: none;\n        cursor: pointer;\n    }\n    dd {\n        margin-inline-start: 0;\n    }\n\n    h1, h2, h3, h4, p {\n        margin: 0;\n        padding: 0;\n    }\n\n    input, textarea, select, button, a {\n        font-family: ${fontFamily};\n        font-weight: 400;\n        font-size: 14px;\n    }\n`\n\nexport default GlobalStyle;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nfunction updateTranslatorKeyToLocalStorage(key) {\n  localStorage.setItem('translatorKey', key);\n}\n\nfunction updateYoutubeKeyToLocalStorage(key) {\n  localStorage.setItem('youtubeKey', key);\n}\n\n// localStorage data\nconst storageTranslatorKey = window.localStorage.getItem('translatorKey') || null;\nconst storageYoutubeKey = window.localStorage.getItem('youtubeKey') || null;\n\nwindow.history.replaceState({}, document.title, window.location.origin);\n\n// store\nconst configData = createSlice({\n    name: 'configData',\n    initialState: {\n      'translatorKey': storageTranslatorKey,\n      'youtubeKey': storageYoutubeKey\n    },\n    reducers: {\n      updateTranslatorKey: (state, action) => {\n        state.translatorKey = action.payload;\n        updateTranslatorKeyToLocalStorage(action.payload);\n      },\n      updateYoutubeKey: (state, action) => {\n        state.youtubeKey = action.payload;\n        updateYoutubeKeyToLocalStorage(action.payload);\n      }\n    }\n});\n\nexport default configData;\n","import React, { useEffect } from 'react';\nimport queryString from 'query-string';\nimport { useDispatch, useSelector } from 'react-redux';\nimport configData from '../../store/configData';\n\nconst ConfigGetter = () => {\n  const { translatorKey, youtubeKey } = useSelector(state => state.configData);\n  const dispatch = useDispatch(configData);\n\n  function handleSaveTranslatorKey(value) {\n    console.log(value)\n    dispatch(configData.actions.updateTranslatorKey(value));\n  }\n\n  function handleSaveYoutubeKey(value) {\n    dispatch(configData.actions.updateYoutubeKey(value));\n  }\n  \n  useEffect(() => {\n    const query = queryString.parse(window.location.search)\n    if (query.azure && query.azure !== translatorKey) {\n      handleSaveTranslatorKey(query.azure);\n    }\n    if (query.youtube && query.youtube !== youtubeKey) {\n      handleSaveYoutubeKey(query.youtube);\n    }\n  }, [])\n  \n  return (\n    <></>\n  )\n}\n\nexport default ConfigGetter;","import React, { useEffect, useState } from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { color, gradient } from '../../constant/color';\nimport { Mobile } from '@styled-icons/boxicons-regular';\n\nconst MobileGuideMask = () => {\n  const [ show, setShow ] = useState(false);\n\n  useEffect(() => {\n    handleDetectDevice();\n    window.addEventListener('resize', handleDetectDevice);\n  }, [])\n\n  function handleDetectDevice() {\n    const isDesktop = window.innerWidth > 1025;\n    setShow(isDesktop);\n  }\n\n  return (\n    <Root show={show}>\n      <Content>\n        <Mobile className=\"icon\" color={color.white.normal} size={48} />\n        <Title>請使用手機裝置體驗</Title>\n      </Content>\n    </Root>\n  )\n}\n\n\nconst bounceAnimation = keyframes`\n  0% { transform: scale(1) }\n  30% { transform: scale(0.9) }\n  80% { transform: scale(0.9) }\n  90% { transform: scale(1.1) }\n  100% { transform: scale(1.1) }\n`\n\nconst Root = styled.div`\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  background: ${gradient.background};\n  z-index: 99;\n  ${({show}) => show && css`display: flex`};\n`\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 500px;\n  min-height: 200px;\n  background: ${color.black.light};\n  box-sizing: border-box;\n  > .icon {\n    animation: ${bounceAnimation} 1s ease infinite;\n  }\n`\n\nconst Title = styled.div`\n  margin-top: 12px;\n  color: ${color.white.normal};\n  font-size: 18px;\n`\n\nexport default MobileGuideMask;","import { createSlice } from \"@reduxjs/toolkit\";\n\nfunction updateLocalStorage(data) {\n  localStorage.setItem('guideStatus', JSON.stringify(data));\n}\n\n// localStorage data\nlet storeData = window.localStorage.getItem('guideStatus') || null;\nstoreData = storeData ? JSON.parse(storeData) : 'show';\n\nconst guideStatus = createSlice({\n    name: 'guideStatus',\n    initialState: {\n      'show': storeData === 'show' ? true : false\n    },\n    reducers: {\n      hideGuide: (state) => {\n        state.show = false;\n        updateLocalStorage('hide');\n      },\n      showGuide: (state) => {\n        state.show = true;\n        updateLocalStorage('show');\n      }\n    }\n});\n\nexport default guideStatus;\n","import React, { useState } from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { color } from '../../constant/color';\nimport YouTube from 'react-youtube';\nimport { useDispatch, useSelector } from 'react-redux';\nimport guideStatus from '../../store/guideStatus';\n\nconst opts = {\n  playerVars: {\n    // https://developers.google.com/youtube/player_parameters\n    autoplay: 0,\n    playsinline: 1,\n    fs: 0\n  },\n};\n\n\nconst HowToUseBoard = () => {\n  const { show } = useSelector(state => state.guideStatus);\n  const dispatch = useDispatch(guideStatus)\n\n  const [ hide, setHide ] = useState(!show);\n  const [ moveOut, setMoveOut ] = useState(false);\n\n  function handleClickButton() {\n    setMoveOut(true);\n    setTimeout(() => {\n      setHide(true);\n      dispatch(guideStatus.actions.hideGuide());\n    }, 1000);\n  }\n\n  return (\n    <Root hide={hide} moveOut={moveOut}>\n      <Content moveOut={moveOut}>\n        <Title>How to use</Title>\n        <PlayerWrapper>\n          <Player>\n            <YouTube className=\"player\" videoId=\"iKp43tXsKmc\" opts={opts} />\n          </Player>\n        </PlayerWrapper>\n        <Button onClick={handleClickButton}>Got it</Button>\n      </Content>\n    </Root>\n  )\n}\n\n\nconst bounceAnimation = keyframes`\n  0% { transform: scale(1) }\n  30% { transform: scale(0.9) }\n  80% { transform: scale(0.9) }\n  90% { transform: scale(1.1) }\n  100% { transform: scale(1.1) }\n`\n\nconst Root = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 98;\n  -webkit-backdrop-filter: blur(10px);\n  backdrop-filter: blur(10px);\n  transition: all .3s ease .6s;\n  ${({ hide }) => hide && css` display: none;`}\n  ${({ moveOut }) => moveOut && css`\n    opacity: 0;\n  `}\n  &:before {\n    content: \"\";\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: ${color.black.dark};\n    opacity: 0.5;\n    z-index: -1;\n  }\n`\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 24px 24px;\n  width: 90%;\n  background: ${color.black.light};\n  box-sizing: border-box;\n  transition: all .6s cubic-bezier(.67,-0.51,.35,1);\n  ${({ moveOut }) => moveOut && css`\n    transform: translateY(100%);\n    opacity: 0;\n  `}\n  > .icon {\n    animation: ${bounceAnimation} 1s ease infinite;\n  }\n`\n\nconst Title = styled.div`\n  margin-bottom: 12px;\n  color: ${color.white.normal};\n  font-size: 24px;\n  font-weight: 600;\n`\n\nconst PlayerWrapper = styled.div`\n  width: 90%;\n`\nconst Player = styled.div`\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 200%;\n  .player {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    iframe {\n      width: 100% !important;\n      height: 100% !important;\n    }\n  }\n`\n\nconst Button = styled.button`\n  margin-top: 24px;\n  border: 0;\n  border-radius: 6px;\n  padding: 10px 16px;\n  background: ${color.primary};\n  color: ${color.white.normal};\n  font-weight: 600;\n  font-size: 16px;\n`\n\nexport default HowToUseBoard;","import React from 'react';\n\nconst Interface = ({ children }) => {\n  return (\n    <div>\n      { children }\n    </div>\n  )\n}\n\nexport default Interface;","import { useEffect, useState } from 'react';\n\nfunction getCaptionList(ajax_response) {\n  const parser = new DOMParser();\n\n  const xmlDoc = parser.parseFromString(ajax_response, \"text/xml\");\n\n  const tracks = [];\n  \n  function getTrackContent(node) {\n    if (node.getAttribute('lang_code').includes('en')) {\n      return node.getAttribute('lang_code');\n    }\n  }\n  \n  try {\n    if (xmlDoc.getElementsByTagName(\"transcript_list\").length > 0) {\n      for (var i = 0; i < xmlDoc.getElementsByTagName(\"transcript_list\")[0].childNodes.length; i++) {\n        const caption = getTrackContent(xmlDoc.getElementsByTagName(\"transcript_list\")[0].childNodes[i]);\n        if (caption) tracks.push(caption);\n        \n      }\n    }\n    else {\n      for (var i = 0; i < ajax_response.getElementsByTagName(\"transcript_list\")[0].childNodes.length; i++) {\n        const caption = getTrackContent(ajax_response.getElementsByTagName(\"transcript_list\")[0].childNodes[i]);\n        if (caption) tracks.push(caption);\n      }\n    }\n\n    return tracks;\n  }\n  catch (error) {\n    // console.log(error);\n    return null;\n  }\n  \n}\n\nfunction getCaption(ajax_response) {\n  const parser = new DOMParser();\n  const xmlDoc = parser.parseFromString(ajax_response, \"text/xml\");\n  const captions = [];\n\n  function decodeEntities(encodedString) {\n    var translate_re = /&(nbsp|amp|quot|lt|gt);/g;\n    var translate = {\n        \"nbsp\":\" \",\n        \"amp\" : \"&\",\n        \"quot\": \"\\\"\",\n        \"lt\"  : \"<\",\n        \"gt\"  : \">\"\n    };\n    return encodedString.replace(translate_re, function(match, entity) {\n        return translate[entity];\n    }).replace(/&#(\\d+);/gi, function(match, numStr) {\n        var num = parseInt(numStr, 10);\n        return String.fromCharCode(num);\n    });\n  }\n  \n  function getTranscriptContent(node) {\n    return {\n      start: node.getAttribute('start'),\n      dur: node.getAttribute('dur'),\n      content: decodeEntities(node.innerHTML)\n    }\n  }\n\n  try {\n    if (xmlDoc.getElementsByTagName(\"transcript\").length > 0) {\n      for (var i = 0; i < xmlDoc.getElementsByTagName(\"transcript\")[0].childNodes.length; i++) {\n        const caption = getTranscriptContent(xmlDoc.getElementsByTagName(\"transcript\")[0].childNodes[i]);\n        captions.push(caption);\n      }\n    }\n    else {\n      for (var i = 0; i < ajax_response.getElementsByTagName(\"transcript\")[0].childNodes.length; i++) {\n        const caption = getTranscriptContent(ajax_response.getElementsByTagName(\"transcript\")[0].childNodes[i]);\n        captions.push(caption);\n      }\n    }\n    return captions;\n  }\n  catch (error) {\n    // console.log(error);\n    alert('Oops, something went wrong.');\n  }\n}\n\nfunction handleFetchYoutubeCaption(id, lang) {\n  const url = `https://video.google.com/timedtext?type=track&lang=${lang}&v=${id}&id=0`;\n  return new Promise((resolve, reject) => {\n    fetch(url, { method: 'POST' })\n    .then(res => resolve(res.text()))\n    .catch(reject)\n  })\n}\n\nfunction handleFetchYoutubeCaptionList(id) {\n  if (id) {\n    const url = `https://video.google.com/timedtext?type=list&v=${id}`;\n    return new Promise((resolve, reject) => {\n      fetch(url, { method: 'POST' })\n      .then(res => {\n        res.status === 200 && resolve(res.text())\n      })\n      .catch((err) => {\n        console.log(err)\n        reject(null)\n      })\n    })\n  }\n}\n\nexport async function checkYoutubeCaptionAvailiable(id) {\n  let result;\n  const captionList = await handleFetchYoutubeCaptionList(id);\n  const currentCaptionList = getCaptionList(captionList);\n  if (currentCaptionList && currentCaptionList.length !== 0) {\n    result = true;\n  }\n  else {\n    result = false;\n  }\n  return result;\n}\n\n\nconst useCaptionGetter = (id) => {\n  const [result, setResult] = useState(null);\n\n  useEffect(() => {\n    (async function() {\n      try {\n        const captionList = await handleFetchYoutubeCaptionList(id);\n        const currentCaptionList = getCaptionList(captionList);\n        const lang = currentCaptionList !== [] ? currentCaptionList[0] : null;\n        if (lang) {\n          const captionData = await handleFetchYoutubeCaption(id, lang);\n          const currentCaptionData = getCaption(captionData);\n          setResult(currentCaptionData);\n        }\n      }\n      catch (err) {\n      }\n    })();\n  }, [])\n  \n  \n  \n  return result;\n}\n\nexport { useCaptionGetter };\n","import React from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { color } from '../../constant/color';\n\nconst SoundIcon = ({ status, ...props }) => {\n  return (\n    <Root play={status} {...props}>\n      <span></span>\n      <span></span>\n      <span></span>\n      <span></span>\n      <span></span>\n    </Root>\n  )\n}\n\nconst playAnimations = [];\nfor (let i = 0; i < 5; i++) {\n  playAnimations.push(keyframes`\n    from { transform: scaleY(${Math.random()/2}); background: hsla(210, 80%, 70%, 1);}\n    to { transform: scaleY(1); background: hsla(190, 100%, 60%, 1);}\n  `)\n}\n\nconst pauseAnimations = [];\nfor (let i = 0; i < 5; i++) {\n  pauseAnimations.push(keyframes`\n    from { transform: scaleY(${Math.random()/2}); background: ${color.primary};}\n    to { transform: scaleY(0.33); background: ${color.primary};}\n  `)\n}\n\n\nconst Root = styled.div`\n  span {\n    display: inline-block;\n    vertical-align: middle;\n    margin: 0 1px;\n    margin-top: -2px;\n    width: 1px;\n    height: 10px;\n    ${({play}) => {\n      const animations = play ? playAnimations : pauseAnimations;\n      return animations.map((animation, i) => (\n        css` &:nth-child(${i+1}) {\n          animation: ${animation} ${0.3 + Math.random()*0.3}s linear infinite alternate;\n        }`\n      ))\n    }\n  }\n`\n\n\nexport default SoundIcon;","import React, { useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { color } from '../../constant/color';\n\nconst ToggleButton = ({onClick=null, children, ...props}) => {\n  const [ active, setActive ] = useState(false);\n\n  function handleClickButton(e) {\n    setActive(!active);\n    onClick && onClick({ event: e, active: !active});\n  }\n  \n  return (\n    <Root active={active} onClick={handleClickButton} {...props}>\n      { children }\n    </Root>\n  )\n}\n\nconst Root = styled.button`\n  position: relative;\n  border: 0;\n  background: transparent;\n  padding: 3px 0px;\n  height: 100%;\n  cursor: pointer;\n  transition: transform .15s cubic-bezier(.69,-0.39,.39,2.06);\n  &:before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: -4px;\n    border-radius: 4px;\n    width: calc(100% + 8px);\n    height: 100%;\n    box-shadow: 2px 2px 3px hsla(0, 0%, 0%, .5);\n    background: ${color.black.normal};\n    opacity: 0;\n    z-index: -1;\n  }\n  ${({active}) => active && css`\n    color: #FFF;\n    transform: scale(1.05);\n    z-index: 1;\n    &:before { opacity: 1; }\n  `}\n`\n\nexport default ToggleButton;","import React, { forwardRef, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\n\nconst ToggleSlider = forwardRef(({ children }, ref) => {\n  const rootRef = useRef(null);\n\n  useEffect(() => {\n    if (ref) {\n      ref.current = {\n        open: handleOpenSlider,\n        close: handleCloseSlider,\n        toggle: handleToggleSlider\n      }\n    }\n  }, []);\n\n  function handleOpenSlider() {\n    rootRef.current.classList.add('active');\n  }\n\n  function handleCloseSlider() {\n    rootRef.current.classList.remove('active');\n  }\n\n  function handleToggleSlider() {\n    if (rootRef.current.classList.contains('active')) {\n      rootRef.current.classList.remove('active');\n    }\n    else {\n      rootRef.current.classList.add('active');\n    }\n  }\n  \n  return (\n    <Root ref={rootRef}>{children}</Root>\n  )\n})\n\n\nconst Root = styled.div`\n  max-height: 0px;\n  width: 100%;\n  overflow: hidden;\n  transition: max-height .3s ease;\n\n  &.active { \n    max-height: 50vh;\n  }\n`\n\nexport default ToggleSlider;","import styled from 'styled-components';\nimport { gradient } from '../../constant/color';\n\nconst PrimaryButton = styled.button`\n  border: 0;\n  border-radius: 50%;\n  width: 60px;\n  height: 60px;\n  background-image: ${gradient.primary};\n  box-shadow: 2px 4px 10px hsl(200, 5%, 5%, .5);\n  svg {\n    color: hsl(200, 5%, 90%, 1);\n    filter: drop-shadow(2px 4px 3px hsl(200, 50%, 30%, .5));\n  }\n  &:active {\n    background-image: linear-gradient(45deg, hsl(210, 40%, 20%) 0%, hsl(190, 40%, 40%) 100%);\n  }\n  &:disabled {\n    opacity: 0.5;\n  }\n`\n\nexport default PrimaryButton;","import React, { forwardRef, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport YouTube from 'react-youtube';\n\nconst opts = {\n  playerVars: {\n    // https://developers.google.com/youtube/player_parameters\n    autoplay: 0,\n    playsinline: 1,\n    fs: 0\n  },\n};\n\nconst YoutubePlayer = forwardRef(({ id, onReady=null, ...props }, ref) => {\n  const [ video, setVideo ] = useState(null);\n  \n  useEffect(() => {\n    if (ref) {\n      ref.current = video;\n    }\n  }, [video])\n\n  function handleListenPlayer(item) {\n    setVideo(item.target);\n\n    const data = {\n      title: item.target.getVideoData().title,\n      duration: item.target.getDuration(),\n    }\n    onReady && onReady(data);\n  }\n  \n  return (\n    <Root {...props}>\n      <YouTube className=\"player\" videoId={id} opts={opts} onReady={handleListenPlayer} />\n    </Root>\n  )\n})\n\nconst Root = styled.div`\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n  .player {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    iframe {\n      width: 100% !important;\n      height: 100% !important;\n    }\n  }\n\n`\n\nexport default YoutubePlayer;","\nimport React from 'react';\nimport styled from 'styled-components';\nimport SoundIcon from '../../components/SoundIcon'\n\nconst PlayerTitle = ({ title, status, onClick, ...props }) => {\n  \n  return (\n    <Root onClick={onClick} {...props}>\n      <SoundIcon status={status} className=\"icon\" />\n      <Title className=\"title\">{ title }</Title>\n    </Root>\n  );\n}\n\nconst Root = styled.div`\n  display: block;\n  border: 0;\n  padding: 6px 0;\n  background: transparent;\n  white-space: nowrap;\n  overflow: hidden;\n  > .icon, > .title {\n    display: inline-block;\n    vertical-align: middle;\n  }\n  > .icon {\n    width: 22px;\n    margin-right: 6px;\n  }\n  > .title {\n    width: calc(100% - 28px);\n  }\n`\n\nconst Title = styled.p`\n  ${'' /* color: ${color.white}; */}\n  font-size: 13px;\n  font-weight: 600;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`\nexport default PlayerTitle;\n","import React, { useRef, useEffect, forwardRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { Rewind, FastForward } from '@styled-icons/boxicons-regular';\nimport { color } from '../../constant/color';\n\nconst PlayerController = forwardRef(({ player, onProgress }, ref) => {\n  const progressBarRef = useRef(null);\n  const progressTouchMoveRef = useRef(null);\n  const timerRef = useRef();\n  \n  useEffect(() => {\n    if (ref && player) {\n      ref.current = {\n        sync: handleSyncPlayTime,\n        deSync: handleDeSyncPlayTime,\n      };\n    }\n  }, [ref, player])\n\n  function handleSyncPlayTime() {\n    const timer = setInterval(() => {\n      // console.log('sync')\n      handleUpdateProgress(player.getCurrentTime() / player.getDuration());\n\n      if (player.getCurrentTime() / player.getDuration() >= 0.99) {\n        handleDeSyncPlayTime();\n      }\n    }, 300);\n\n    timerRef.current = timer;\n    \n    setTimeout(() => onProgress(), 300);\n  }\n\n  function handleDeSyncPlayTime() {\n    // console.log('clear')\n    clearInterval(timerRef.current);\n  }\n\n  function handleUpdateProgress(count) {\n    const percent = Math.min(Math.max(count, 0), 1);\n    progressBarRef.current.style.width = `${percent * 100}%`;\n  }\n\n  function handleStartDragProgress() {\n    handleDeSyncPlayTime();\n  }\n  function handleDragProgress(e) {\n    const { x: progressOffsetX, width: progressWidth } = e.currentTarget.getBoundingClientRect();\n    const { clientX } = e.touches[0];\n    progressTouchMoveRef.current = (clientX - progressOffsetX) / progressWidth;\n    handleUpdateProgress((clientX - progressOffsetX) / progressWidth);\n  }\n\n  function handleApplyProgress() {\n    player.seekTo(progressTouchMoveRef.current * player.getDuration());\n    handleSyncPlayTime();\n  }\n\n  function handleClickRewind() {\n    player.seekTo(player.getCurrentTime() - (player.getDuration()/30));\n    setTimeout(() => onProgress(), 300);\n\n  }\n\n  function handleClickForward() {\n    player.seekTo(player.getCurrentTime() + (player.getDuration()/30));\n    setTimeout(() => onProgress(), 300);\n\n  }\n  \n  return (\n    <Root>\n      <Button onClick={handleClickRewind}><Rewind size=\"18\" /></Button>\n      <Progress \n        onTouchStart={handleStartDragProgress} \n        onTouchMove={handleDragProgress} \n        onTouchEnd={handleApplyProgress}>\n        <div ref={progressBarRef} className=\"bar\"></div>\n      </Progress>\n      <Button onClick={handleClickForward}><FastForward size=\"18\" /></Button>\n    </Root>\n  )\n})\n\nconst Root = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: stretch;\n  padding: 6px 0;\n  width: 100%;\n`\nconst Progress = styled.div`\n  display: block;\n  width: calc(100% - 76px);\n  background: ${color.black.light};\n  box-sizing: border-box;\n  .bar {\n    width: 0;\n    height: 100%;\n    background: ${color.primary};\n  }\n`\nconst Button = styled.button`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0;\n  padding: 6px 6px;\n  width: 30px;\n  border-radius: 3px;\n  color: ${color.white.normal};\n  background: ${color.black.light};\n  z-index: 2;\n  p {\n    transform: scale(0.65);\n    font-size: 14px;\n  }\n`\n\n\nexport default PlayerController;","import { createSlice } from \"@reduxjs/toolkit\";\n\n// timestamp for current\nconst currentDateTime = new Date();\n\n// methods\nfunction saveToLibrary(state, data) {\n  const currentLibrary = [...state.libraryData];\n  const timestampIndex = currentLibrary.findIndex(data => data.timestamp === currentDateTime);\n  \n  const item = {timestamp: currentDateTime, words: data};\n\n  if (timestampIndex !== -1) {\n    data.forEach(child => currentLibrary[timestampIndex].words.push(child));\n  }\n  else {\n    currentLibrary.push(item);\n  }\n\n  state.libraryData = currentLibrary;\n  updateLocalStorage(currentLibrary);\n}\n\nfunction updateLocalStorage(data) {\n  localStorage.setItem('wordLibrary', JSON.stringify(data));\n}\n\n// localStorage data\nlet storeData = window.localStorage.getItem('wordLibrary') || null;\nstoreData = storeData ? JSON.parse(storeData) : [];\nstoreData.forEach(item => item.timestamp = new Date(item.timestamp));\n\n\n// word Library\nconst wordLibrary = createSlice({\n    name: 'wordLibrary',\n    initialState: {\n      'libraryData': storeData,\n      'currentData': [],\n    },\n    reducers: {\n      updateItemToCurrentData: (state, action) => {\n        const item = action.payload;\n        const data = [...state.currentData];\n        const index = data.findIndex(data => data.content === item.content && data.origin === item.origin);\n        data.splice(index, 1, item);\n        state.currentData = data;\n      },\n      addItemToCurrentData: (state, action) => {\n        const item = action.payload;\n        const data = [...state.currentData];\n        data.push(item);\n        state.currentData = data;\n      },\n      removeItemFromCurrentData: (state, action) => {\n        const item = action.payload;\n        const data = [...state.currentData];\n        const index = data.findIndex(data => (data.content === item.content && data.origin === item.origin));\n        data.splice(index, 1);\n        state.currentData = data;\n      },\n      archiveCurrentDataToLibrary: (state) => {\n        const data = [...state.currentData];\n        saveToLibrary(state, data);\n      },\n      clearCurrentData: (state) => {\n        state.currentData = [];\n      },\n      updateLibraryData: (state, action) => {\n        state.libraryData = action.payload;\n        updateLocalStorage(action.payload)\n      }\n    }\n});\n\nexport default wordLibrary;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Play } from '@styled-icons/boxicons-regular';\nimport ToggleButton from '../../components/ToggleButton';\nimport { color } from '../../constant/color';\n\nconst SentenceItem = ({ data, onReplayClick, onWordClick, ...props}) => {\n\n  function getSplitSentence(str) {\n    const splitSentence = str.split(/(\\s+)(\\w+)/g);\n    const result = splitSentence.map(item => {\n      if (item.match(/\\w+/)) {\n        return { type: 'button', content: item }\n      }\n      else {\n        return item;\n      }\n    })\n\n    return result;\n  }\n\n  function handleClickToMarkWord({event, active}) {\n    const { word } = event.currentTarget.dataset;\n    const status = active ? 'add' : 'remove';\n    onWordClick({ word, status, origin: data.content })\n  }\n  \n  return (\n    <Root {...props}>\n      <PlayButton data-sec={data.start} onClick={onReplayClick}>\n        <Play size={14} />\n      </PlayButton>\n      <Sentence>\n        {\n          getSplitSentence(data.content).map((item, i) =>\n            item.type === 'button' ?\n            <WordButton data-word={item.content} key={i} onClick={handleClickToMarkWord}>{ item.content }</WordButton>\n            :\n            <span key={i}>{ item }</span>\n          )\n        }\n      </Sentence>\n    </Root>\n  )\n}\n\nconst Root = styled.li`\n  display: flex;\n  align-items: center;\n  & + li {\n    margin-top: 12px;\n  }\n`\n\nconst PlayButton = styled.button`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-right: 12px;\n  border: 2px solid ${color.middle};\n  border-radius: 50%;\n  padding: 0;\n  width: 22px;\n  height: 22px;\n  background: transparent;\n  color: ${color.white.normal};\n`\n\nconst Sentence = styled.div`\n  width: calc(100% - 36px);\n`\n\nconst WordButton = styled(ToggleButton)`\n  margin-left: -1px;\n  margin-right: -1px;\n  color: ${color.pureWhite};\n`\n\nexport default SentenceItem;","import React, { forwardRef, useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { useDispatch } from 'react-redux';\nimport { color } from '../../constant/color';\nimport wordLibrary from '../../store/wordLibrary';\nimport SentenceItem from './SentenceItem';\n\nconst SentenceSection = forwardRef(({ captions, status, onReplayClick }, ref) => {\n  const [sentenceData, setSentenceData] = useState([]);\n  const sentenceDataRef = useRef(null);\n\n  useEffect(() => {\n    if (ref) {\n      ref.current = {\n        addItemBySec: handleAddItem\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    if (sentenceDataRef) {\n      sentenceDataRef.current = sentenceData;\n    }\n  }, [sentenceData])\n  \n  function handleAddItem(sec) {\n    const caption = handleGetCurrentCaption(sec);\n    const currentData = [...sentenceDataRef.current];\n\n    // prevent input same sentence in short time.\n    if (caption && (caption?.content !== currentData[currentData.length-1]?.content)) {\n      currentData.push(caption);\n      setSentenceData(currentData);\n    }\n  }\n\n  function handleGetCurrentCaption(sec) {\n    let content;\n\n    captions.forEach(caption => {\n      const start = Number(caption.start);\n      const end =  start + Number(caption.dur);\n      if (sec > start) {\n        content = { \n          start: start,\n          end: end,\n          content: caption.content,\n          spot: sec,\n          timestamp: new Date()\n        };\n      }\n      else if (sec > end) {\n        return;\n      }\n    });\n\n    return content;\n  }\n\n  function handleClickWordButton({status, word, origin}) {\n    if (status === 'add') {\n      handleAddWordData(word, origin);\n    }\n    else if (status === 'remove') {\n      handleRemoveWordData(word, origin);\n    }\n  }\n\n  // Control Word Library\n  const dispatch = useDispatch(wordLibrary);\n  \n  function handleAddWordData(word, origin) {\n    const item = {\n      origin: origin,\n      content: word,\n      timestamp: new Date(),\n    };\n\n    dispatch(wordLibrary.actions.addItemToCurrentData(item));\n  }\n\n  function handleRemoveWordData(word, full) {\n    const item = {\n      origin: full,\n      content: word,\n    };\n\n    dispatch(wordLibrary.actions.removeItemFromCurrentData(item));\n  }\n\n\n  \n  return (\n    <Root>\n    \n      { sentenceData.length === 0 &&\n        <Hint>\n          { status === 'clickToReplay' && <span>Press ↺ to replay again 🤔</span> }\n          { status === 'clickToSave' && <span>Great! Press <img src=\"/images/icon-add.svg\" alt=\"\" /> to add first sentence 🎉</span> }\n          { status === 'clickToPlay' && <span>Hi! Press <img src=\"/images/icon-play.svg\" alt=\"\" /> to start your listening 👍</span>}\n        </Hint>\n      }\n      <List>\n        { sentenceData?.map((data, i) =>\n          <SentenceItem onReplayClick={onReplayClick}\n            onWordClick={handleClickWordButton} key={i} data={data} />\n        ) }\n      </List>\n    </Root>\n  )\n})\n\nconst Root = styled.div`\n  border-radius: 4px;\n  padding: 16px 12px;\n  background: ${color.black.light};\n  box-sizing: border-box;\n  \n`\n\nconst Hint = styled.div`\n  span, img {\n    display: inline-block;\n    vertical-align: middle;\n  }\n  img {\n    margin-bottom: 2px;\n  }\n`\n\nconst List = styled.ul`\n  \n`\n\n\nexport default SentenceSection;","import React, { useEffect, useRef, useState, useMemo } from 'react';\nimport styled, { css, keyframes } from 'styled-components';\nimport { useCaptionGetter } from '../../utils/useCaptionGetter';\n\nimport ToggleButton from '../../components/ToggleButton';\nimport ToggleSlider from '../../components/ToggleSlider';\nimport PrimaryButton from '../../components/PrimaryButton';\nimport Player from '../../components/Player';\n\nimport PlayerTitle from './PlayerTitle';\nimport PlayerController from './PlayerController';\nimport SentenceSection from './SentenceSection';\n\nimport { color } from '../../constant/color';\nimport { Youtube as YoutubeIcon } from '@styled-icons/boxicons-logos';\nimport { Play, Pause, Plus, Loader, Reset } from '@styled-icons/boxicons-regular';\n\nconst PlayerSection = ({ hide=false, id }) => {\n  const playerSliderRef = useRef(null);\n  const controllerSliderRef = useRef(null);\n  const appRef = useRef(null);\n  \n  const playerRef = useRef(null);\n  const listRef = useRef(null);\n  const controllerRef = useRef(null);\n  const timerRef = useRef(null);\n\n  const [ play, setPlay ] = useState(false);\n  const [ finish, setFinish ] = useState(false);\n  const [ ready, setReady ] = useState(false);\n  const [ videoData, setVideoData ] = useState(null);\n\n  const captions = useCaptionGetter(id);\n\n  function handleCheckApplicationReady(data) {\n    setVideoData(data);\n    if (captions) setReady(true);\n  }\n\n  useEffect(() => {\n    if (playerRef.current && !hide) {\n      const isFinish = playerRef.current.getCurrentTime() / playerRef.current.getDuration() >= 0.99;\n      isFinish && setFinish(true);\n    }\n  }, [playerRef, hide]);\n\n  useEffect(() => {\n    if (controllerRef.current) {\n      if (hide) controllerRef.current.deSync()\n      else controllerRef.current.sync()\n    }\n  }, [hide])\n\n  const MainButtonStatus = useMemo(() => {\n    let status;\n    // 在介面 | 已播放\n    if (!hide && play) status = 'clickToSave';\n    // 不在介面 | 已播放\n    if (hide && play) status = 'clickToPause';\n    // 不在介面 | 已播放\n    \n    // 在介面 | 已暫停\n    if (!hide && !play) status = 'clickToPlay';\n    // 不在介面 | 已暫停\n    if (hide && !play) status = 'clickToPlay';\n    \n    if (!play && finish) status = 'clickToReplay';\n    \n\n    return status\n  }, [hide, play, finish]);\n\n  useEffect(() => {\n    updateFinishTimer(play ? 'play' : 'stop');\n  }, [play]);\n\n  function handleClickMainButton() {\n    switch (MainButtonStatus) {\n      case 'clickToPlay': handleVideoPlay();\n        break;\n\n      case 'clickToReplay': handleVideoReplay();\n        break;\n\n      case 'clickToPause': handleVideoPause();\n        break;\n\n      case 'clickToSave': handleSaveCurrentTimeData();\n        break;\n    \n      default: handleVideoPlay();\n        break;\n    }\n  }\n  \n  function handleSaveCurrentTimeData() {\n    const time = playerRef.current.getCurrentTime();\n    listRef.current.addItemBySec(time);\n    \n    if (appRef.current.scrollHeight - appRef.current.offsetHeight === appRef.current.scrollTop) {\n      setTimeout(() => appRef.current.scrollTop = 9999, 300);\n    }\n  }\n\n  function handleVideoMove(e) {\n    const { sec } = e.currentTarget.dataset;\n    playerRef.current.seekTo(sec);\n  }\n\n  function handleVideoPlay() {\n    playerRef.current.playVideo();\n    if (!hide) controllerRef.current.sync();\n    setPlay(true);\n  }\n\n  function handleVideoReplay() {\n    playerRef.current.playVideo();\n    if (!hide) controllerRef.current.sync();\n    setFinish(false);\n    setPlay(true);\n  }\n\n  function handleVideoPause() {\n    playerRef.current.pauseVideo();\n    controllerRef.current.deSync();\n    setPlay(false);\n  }\n\n  function handleTogglePlayerSlider() {\n    playerSliderRef.current.toggle();\n  }\n\n  function handleToggleControllerSlider() {\n    controllerSliderRef.current.toggle();\n  }\n\n  function updateFinishTimer(status='play') {\n    clearTimeout(timerRef.current);\n\n    if (status === 'play') {\n      const delta = playerRef.current.getDuration() - playerRef.current.getCurrentTime();\n      timerRef.current = setTimeout(() => {\n        setPlay(false);\n        setFinish(true);\n      }, delta * 1000);\n    }\n  }\n  \n  return (\n    <Root>\n      <Application ref={appRef} hide={hide}>\n        <PlayerHead>\n          <PlayerTitle status={play} title={videoData?.title} onClick={handleToggleControllerSlider} />\n          <PlayerToggleButton onClick={handleTogglePlayerSlider}><YoutubeIcon size=\"16\" /></PlayerToggleButton>\n        </PlayerHead>\n        <PlayerWrapper>\n          <ToggleSlider ref={playerSliderRef}>\n            <PauseMask onClick={handleVideoPause} />\n            <Player className=\"player\" ref={playerRef} onReady={handleCheckApplicationReady} id={id} />\n          </ToggleSlider>\n        </PlayerWrapper>\n        <ControllerWrapper>\n          <ToggleSlider ref={controllerSliderRef}>\n            <PlayerController ref={controllerRef} player={playerRef.current} onProgress={updateFinishTimer} />\n          </ToggleSlider>\n        </ControllerWrapper>\n        { !ready && <div>prepare the caption.</div> }\n        { ready && <>\n          <SentenceWrapper>\n            <SentenceSection status={MainButtonStatus} captions={captions} ref={listRef} onReplayClick={handleVideoMove} />\n          </SentenceWrapper>\n        </> }\n      </Application>\n      <ButtonWrapper>\n        <MainButton status={MainButtonStatus} disabled={!ready} onClick={handleClickMainButton}>\n          { !ready && <Loader size=\"24\" />  }\n          { (ready && MainButtonStatus === 'clickToPlay')   && <Play size=\"24\" /> }\n          { (ready && MainButtonStatus === 'clickToReplay') && <Reset size=\"24\" /> }\n          { (ready && MainButtonStatus === 'clickToSave')   && <Plus size=\"24\" /> }\n          { (ready && MainButtonStatus === 'clickToPause')  && <Pause size=\"24\" /> }\n        </MainButton>\n      </ButtonWrapper>\n    </Root>\n  );\n}\n\nconst Root = styled.div`\n  background: ${color.black.normal};\n`\n\nconst Application = styled.div`\n  padding: 16px;\n  padding-top: 48px;\n  height: 100vh;\n  max-width: 100%;\n  overflow-y: auto;\n  box-sizing: border-box;\n  color: ${color.white.normal};\n  ${({ hide }) => hide && css`\n    position: fixed;\n    opacity: 0;\n    z-index: -1;\n  `}\n`\n\nconst PlayerHead = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  padding: 0 16px;\n  padding-top: 12px;\n  background: ${color.black.normal};\n  box-shadow: 0px 4px 4px ${color.black.dark};\n  box-sizing: border-box;\n  z-index: 2;\n`\n\nconst ControllerWrapper = styled.div`\n  margin-bottom: 12px;\n`\n\nconst PlayerWrapper = styled.div`\n  position: relative;\n`\nconst PauseMask = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 2;\n`\n\nconst SentenceWrapper = styled.div`\n  position: relative;\n  padding-bottom: 120px;\n`\n\n\nconst ButtonWrapper = styled.div`\n  display: flex;\n  position: fixed;\n  bottom: 120px;\n  left: 0;\n  width: 100%;\n  height: 0;\n  max-width: 100%;\n  z-index: 2;\n`\n\nconst rotationAnimation = keyframes`\n  from { transform: rotate(0deg) }\n  to { transform: rotate(360deg) }\n`\n\nconst bounceAnimation = keyframes`\n  0% { transform: scale(1) }\n  30% { transform: scale(0.9) }\n  80% { transform: scale(0.9) }\n  90% { transform: scale(1.1) }\n  100% { transform: scale(1.1) }\n`\n\nconst MainButton = styled(PrimaryButton)`\n  margin: 0 auto;\n  &:disabled svg {\n    animation: ${rotationAnimation} 3s linear;\n  }\n  ${({ status }) => status === 'clickToPlay' && css`\n    animation: ${bounceAnimation} 1s ease infinite;\n  `}\n`\n\nconst PlayerToggleButton = styled(ToggleButton)`\n  margin-right: 4px;\n  padding: 2px 4px;\n  color: ${color.white.normal};\n`\n\nexport default PlayerSection;\n","\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Confused } from '@styled-icons/boxicons-regular';\nimport { color } from '../../constant/color';\n\n\nconst EmptyHint = ({ ...props }) => {\n  \n  return (\n    <Root {...props}>\n      <Confused size={72} />\n      <Title>Oops! there is nothing for listening.</Title>\n    </Root>\n  );\n}\n\nconst Root = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100vh;\n  border: 0;\n  svg {\n    margin-top: -120px;\n    color: ${color.gray.normal};\n  }\n`\n\nconst Title = styled.p`\n  color: ${color.gray.normal};\n  font-size: 13px;\n  font-weight: 600;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`\nexport default EmptyHint;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport styled from 'styled-components';\nimport PlayerSection from './PlayerSection';\nimport EmptyHint from './EmptyHint';\n\nconst PlayerPage = ({ currentPage }) => {\n\n  const {id} = useSelector(state => state.videoData);\n  \n  return (\n    <Page>\n      { (!id && currentPage === 'player') && <EmptyHint  /> }\n      { id && <PlayerSection hide={ currentPage !== 'player' } id={id} /> }\n    </Page>\n  )\n}\n\nconst Page = styled.div`\n  \n`\n\n\nexport default PlayerPage;","import { createSlice } from \"@reduxjs/toolkit\";\n\nfunction updateLocalStorage(data) {\n  localStorage.setItem('videoHistory', JSON.stringify(data));\n}\n\n// localStorage data\nlet storeData = window.localStorage.getItem('videoHistory') || null;\nstoreData = storeData ? JSON.parse(storeData) : [];\n\nconst videoData = createSlice({\n    name: 'videoData',\n    initialState: {\n      'id': null,\n      'history': storeData,\n      'search': null\n    },\n    reducers: {\n      clearVideoId: (state) => {\n        state.id = null;\n      },\n      updateVideoId: (state, action) => {\n        state.id = action.payload;\n      },\n      updateVideoHistory: (state, action) => {\n        state.history = action.payload;\n        updateLocalStorage(action.payload);\n      },\n      updateSearchResult: (state, action) => {\n        state.search = action.payload;\n      }\n    }\n});\n\nexport default videoData;\n","import React, { useRef, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport axios from 'axios';\nimport { color } from '../../constant/color';\nimport { Search } from '@styled-icons/boxicons-regular';\nimport PrimaryButton from '../../components/PrimaryButton';\nimport { checkYoutubeCaptionAvailiable } from '../../utils/useCaptionGetter';\nimport { useSelector } from 'react-redux';\n\nconst InputerSection = ({ onResult }) => {\n  const inputRef = useRef(null);\n  const { youtubeKey } = useSelector(state => state.configData);\n  const [ message, setMessage ] = useState(null);\n  const [ active, setActive ] = useState(false);\n\n  // Input content checker\n  function handleCheckInputAvailiable() {\n    const value = inputRef.current.value;\n\n    if (checkYoutubeType(value)) {\n      handleCheckUrlAvailiable(value);\n    }\n    else {\n      handleCheckKeywordAvailiable(value);\n    }\n  }\n\n  function handleCheckKeywordAvailiable(keyword) {\n    setMessage(null);\n\n    if (youtubeKey) {\n      if (keyword && active === false) {\n        setActive(true);\n      }\n      if (keyword === '' && active === true) {\n        setActive(false);\n      }\n    }\n    else {\n      setMessage('Oops！請檢查 Youtube Key 是否正確')\n    }\n\n  }\n\n  function checkYoutubeType(url) {\n    let result = false;\n    \n    if (url.indexOf('https://') !== -1) result = true;\n    if (url.indexOf('http://') !== -1) result = true;\n\n    return result;\n  }\n  \n  function handleCheckUrlAvailiable(url) {\n    if (url.length === 0) {\n      setActive(false);\n      setMessage(null);\n    }\n    else {\n      let video_id = (url.split('v=')[1] || url.split('youtu.be/')[1]) || null;\n      \n      if (video_id && video_id.length >= 11) {\n        const ampersandPosition = video_id.indexOf('&');\n        if (ampersandPosition != -1) {\n          video_id = video_id.substring(0, ampersandPosition);\n        }\n        \n        handleCheckCaption(video_id);\n      }\n      else {\n        setMessage('Hmm... 請輸入正確的影片網址 😮')\n        setActive(false);\n      }\n    }\n  }\n\n  function handleCheckCaption(id) {\n    checkYoutubeCaptionAvailiable(id).then(res => {\n      if (res === false) {\n        setMessage('Oops! 這支影片沒有提供可用字幕 😓')\n        setActive(false);\n      }\n      else {\n        setMessage(null);\n        setActive(true);\n      }\n    });\n  }\n\n\n  async function handleClickSearch() {\n    const value = inputRef.current.value;\n\n    if (checkYoutubeType(value)) {\n      const videoId = getVideoId(value);\n      onResult([videoId])\n    }\n    else {\n      const results = await searchByKeyword(value);\n      onResult(results)\n    }\n  }\n  \n  async function searchByKeyword(value) {\n    let keyword = value.replace(/\\s/, '+');\n    return new Promise((resolve) => {\n      axios.get(`https://www.googleapis.com/youtube/v3/search?q=${keyword}&key=${youtubeKey}&maxResults=10`)\n      .then(res => {\n        filterVideoHasCaption(res.data.items).then(res => resolve(res));\n        setMessage(null)\n      })\n      .catch(_ => setMessage('Oops！請檢查 Youtube Key 是否正確'))\n    })\n  }\n\n  function getVideoId(url) {\n    let videoId = url.split('v=')[1] || url.split('youtu.be/')[1];\n    const ampersandPosition = videoId.indexOf('&');\n    \n    if (ampersandPosition != -1) {\n      videoId = videoId.substring(0, ampersandPosition);\n    }\n    \n    return videoId;\n  }\n  \n\n  function filterVideoHasCaption(data) {\n    const currentData = [];\n    let count = 0;\n    let max = 5;\n    return new Promise((resolve) => {\n\n      data.forEach(item => {\n        checkYoutubeCaptionAvailiable(item?.id?.videoId).then(res => {\n          count += 1;\n          res && currentData.push(item.id.videoId);\n          if (count === data.length) resolve(currentData);\n        });\n      })\n    })\n  }\n\n  \n  return (\n    <Root>\n      <InputWrap>\n        <Input ref={inputRef}\n          onChange={handleCheckInputAvailiable}\n          type=\"text\"\n          placeholder=\"貼上 Youtube 影片網址或輸入關鍵字\" />\n        { message && <Msg><p>{ message }</p></Msg> }\n      </InputWrap>\n      <ButtonWrap active={active}>\n        <Button disabled={!active} onClick={handleClickSearch}><Search size=\"24\" /></Button>\n      </ButtonWrap>\n    </Root>\n  )\n}\n\nconst Root = styled.div`\n  position: relative;\n  padding: 24px;\n  padding-top: 32px;\n  padding-bottom: 72px;\n  width: 100%;\n  background: ${color.black.light};\n  box-sizing: border-box;\n`\n\nconst InputWrap = styled.div`\n  position: relative;\n`\n\nconst Msg = styled.div`\n  position: absolute;\n  top: calc(100% + 12px);\n  width: 100%;\n  text-align: center;\n  > p {\n    position: relative;\n    display: inline-block;\n    border-radius: 4px;\n    padding: 6px 12px 8px;\n    color: ${color.white.normal};\n    background: ${color.primary};\n    &:before {\n      content: \"\";\n      position: absolute;\n      bottom: 99%;\n      left: 50%;\n      width: 0;\n      height: 0; \n      border-bottom: 6px solid ${color.primary};\n      border-left: 8px solid transparent;\n      border-right: 8px solid transparent;\n      transform: translateX(-50%);\n    }\n\n  }\n`\n\nconst Input = styled.input`\n  width: 100%;\n  border: 0;\n  padding: 12px;\n  background: ${color.black.dark};\n  color: ${color.white.normal};\n  box-sizing: border-box;\n`\n\nconst ButtonWrap = styled.div`\n  position: absolute;\n  top: 100%;\n  left: 0;\n  width: 100%;\n  transform: scale(0.5);\n  transition: transform .3s cubic-bezier(.59,.01,.59,2.04);\n  ${({ active }) => active && css`\n    transform: scale(1);\n  `}\n`\nconst Button = styled(PrimaryButton)`\n  position: absolute;\n  left: 50%;\n  top: 100%;\n  transform: translate(-50%, -50%);\n`\n\nexport default InputerSection;","import { useState } from 'react';\nimport { useRef } from 'react';\nimport { useEffect } from 'react';\nimport YouTubeIframeLoader from 'youtube-iframe';\n\nexport const useYoutubeIFrameApi = (id) => {\n  const playerRef = useRef(null);\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    const container = document.createElement('div');\n    container.id = id;\n    container.style.display = 'none';\n    document.body.append(container);\n    \n    YouTubeIframeLoader.load(yt => {\n      const player = new yt.Player(id,\n        { videoId: id,\n          events: {onReady: ytData => getYoutubeData(ytData) }\n        }\n      );\n\n      playerRef.current = player;\n    })\n    return () => setData(null);\n  }, [])\n  \n  useEffect(() => {\n    if (data) {\n      playerRef.current.destroy();\n      const container = document.getElementById(id);\n      document.body.removeChild(container);\n    }\n  }, [data])\n  \n  function getYoutubeData(ytData) {\n    setData({\n      ...ytData.target.getVideoData(),\n      cover: `https://img.youtube.com/vi/${id}/0.jpg`\n    });\n  }\n  \n  return data;\n}","import React from 'react';\nimport styled, {keyframes} from 'styled-components';\nimport { color } from '../../constant/color';\nimport { useYoutubeIFrameApi } from '../../utils/useYoutubeIFrameApi';\nimport { Loader } from '@styled-icons/boxicons-regular';\n\nconst VideoItem = ({id, onClick, ...props}) => {\n  const data = useYoutubeIFrameApi(id);\n\n  function handleClickVideoItem() {\n    onClick(id);\n  }\n  \n  return (\n    <>{\n      data ?\n      <Root {...props} onClick={handleClickVideoItem}>\n        <img src={data.cover} alt=\"\" />\n        <div className=\"title\">{data.title}</div>\n      </Root>\n      :\n      <PlaceHolder><Loader size={24} /></PlaceHolder>\n    }</>\n  )\n}\n\nconst Root = styled.div`\n  display: flex;\n  align-items: center;\n  height: 90px;\n  img {\n    display: block;\n    max-width: 120px;\n    width: 50%;\n    height: auto;\n  }\n  .title {\n    margin-left: 12px;\n    color: ${color.white.normal};\n  }\n`\n\n\nconst rotationAnimation = keyframes`\n  from { transform: rotate(0deg) }\n  to { transform: rotate(360deg) }\n`\n\nconst PlaceHolder = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 90px;\n  svg {\n    color: ${color.white.normal};\n    animation: ${rotationAnimation} 3s linear;\n  }\n`\n\nexport default VideoItem;","import React from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled, { css } from 'styled-components';\nimport videoData from '../../store/videoData';\nimport InputerSection from './InputerSection'\nimport VideoItem from '../../components/VideoItem';\nimport { color } from '../../constant/color';\n\nconst HomePage = ({ currentPage, onIdReady }) => {\n  const dispatch = useDispatch(videoData);\n  const { id: currentId, history, search } = useSelector(state => state.videoData);\n  \n  function handleGetVideoData(data) {\n    dispatch(videoData.actions.updateSearchResult(data));\n  }\n\n  function addVideoToHistoryList(id) {\n    const currentHistory = [...history];\n    if (currentHistory.findIndex(video => video === id) === -1) {\n      currentHistory.push(id);\n      const reduceHistory = currentHistory.slice(currentHistory.length-4, currentHistory.length);\n      dispatch(videoData.actions.updateVideoHistory(reduceHistory));\n    }\n  }\n\n  function applyVideoData(id) {\n    if (currentId === id) {\n      onIdReady();\n    }\n    else {\n      dispatch(videoData.actions.clearVideoId());\n      setTimeout(() => {\n        dispatch(videoData.actions.updateVideoId(id));\n        onIdReady();\n      }, 300);\n    }\n\n    // add to history\n    addVideoToHistoryList(id);\n  }\n\n  function orderDataByLatest(data) {\n    const currentData = [...data];\n    const reverseData = currentData.reverse();\n    return reverseData;\n  }\n\n  \n  return (\n    <>\n    {\n      currentPage === 'home' &&\n      <Root>\n        <HeadingTools>\n          <InputerSection onResult={handleGetVideoData} />\n        </HeadingTools>\n        { search &&\n          <SearchSection key={search}>\n            <Title>搜尋結果</Title>\n            { search.length === 0 &&\n              <NotFound>\n                找不到影片，請嘗試其他關鍵字。<br />\n                或直接貼上影片連結。\n              </NotFound>\n            }\n            <List>\n              { search?.map((item, i) =>\n                <li key={i}><VideoItem id={item} onClick={applyVideoData} /></li>\n              ) }\n            </List>\n          </SearchSection>\n        }\n        { (history && history.length !== 0) &&\n          <HistorySection>\n            <Title>觀看紀錄</Title>\n            <List>\n              { orderDataByLatest(history)?.map((item, i) =>\n                <li key={i}><VideoItem id={item} onClick={applyVideoData} /></li>\n              ) }\n            </List>\n          </HistorySection>\n        }\n      </Root>\n    }\n    </>\n  )\n}\n\nconst Root = styled.div`\n  position: relative;\n  padding: 16px;\n  padding-top: 0;\n  padding-bottom: 120px;\n  height: 100vh;\n  max-width: 100%;\n  overflow-y: auto;\n  box-sizing: border-box;\n`\n\nconst HeadingTools = styled.div`\n  margin: 0 -16px;\n`\n\nconst HistorySection = styled.div`\n  padding-top: 48px;\n`\n\nconst SearchSection = styled.div`\n  padding-top: 48px;\n`\n\nconst List = styled.ul`\n  display: flex;\n  flex-direction: column-reverse;\n  li + li {\n    margin-bottom: 12px\n  }\n`\nconst Title = styled.div`\n  margin-bottom: 12px;\n  color: ${color.white.normal};\n  font-size: 18px;\n`\nconst NotFound = styled.div`\n  margin-bottom: 12px;\n  color: ${color.gray.normal};\n  font-size: 14px;\n`\nexport default HomePage;\n","import { useEffect, useState } from 'react';\n\nfunction useTranslatGetter(word) {\n  const [result, setResult] = useState(null);\n\n  useEffect(() => {\n    (async function() {\n      try {\n        const translateContent = await handleGetTranslate(word);\n        translateContent && setResult(translateContent);\n      }\n      catch (err) { setResult(null) }\n    })();\n  }, [])\n  \n  \n  return result;\n}\n\nexport function handleGetTranslate(key, word) {\n  return new Promise((resolve, reject) => {\n    fetch('https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=zh-TW',\n    {\n      headers: {\n        'Ocp-Apim-Subscription-Key': key,\n        'content-type': 'application/json'\n      },\n      method: 'POST',\n      body: `[{'Text': '${word}'}]`\n    }).then(res => {\n      resolve(res.json())\n    })\n    .catch(reject);\n  })\n}\n\nexport default useTranslatGetter;","import React, { useState, useRef } from 'react';\nimport styled, {css} from 'styled-components';\nimport { color } from '../../constant/color';\nimport { handleGetTranslate } from '../../utils/useTranslateGetter';\nimport { useSelector } from 'react-redux';\nimport { Check } from '@styled-icons/boxicons-regular';\nimport { Cool } from '@styled-icons/boxicons-solid';\n\nconst WordItem = ({ advance=false, data, onUpdate }) => {\n  const NoteRef = useRef(null);\n  const { translatorKey } = useSelector(state => state.configData);\n  const [ active, setActive ] = useState(false);\n  const [ check, setCheck ] = useState(false);\n  const [ isTranslating, setIsTranslating ] = useState(false);\n\n  function handleFocusNote() {\n    setActive(true);\n    setIsTranslating(false);\n  }\n  \n  function handleSaveNote() {\n    setActive(false);\n    const note = NoteRef.current.value;\n    const item = {...data, note: note};\n    onUpdate(item);\n  }\n\n  function handleClickTranslateButton(e) {\n    const { word } = e.currentTarget.dataset;\n    setIsTranslating(true);\n    (async function() {\n      try {\n        const content = await handleGetTranslate(translatorKey, word);\n        NoteRef.current.value = content[0].translations[0].text;\n        setIsTranslating(false);\n        setActive(false);\n        handleSaveNote();\n      }\n      catch (err) { alert('translate false'); }\n    })()\n  }\n\n  function handleClickCheckButton() {\n    setCheck(true);\n    const note = NoteRef.current.value;\n    const item = {...data, note: note, check: true};\n    setTimeout(() => onUpdate(item), 1000);\n  }\n\n  return (\n    <Root>\n      <Word>{ data.content }</Word>\n      <Note active={active} ref={NoteRef} type=\"text\" onFocus={handleFocusNote} defaultValue={data.note} />\n      { active &&\n        <Button disabled={isTranslating} data-word={data.content} onClick={handleClickTranslateButton} >中</Button>\n      }\n      {\n        (advance && !active) &&\n        <CheckButton disabled={check} check={check} onClick={handleClickCheckButton} >\n          { !check && <Check size=\"16\" /> }\n          { check && <Cool size=\"16\" /> }\n        </CheckButton>\n      }\n      { active && <CheckMask onClick={handleSaveNote} /> }\n    </Root>\n  )\n};\n\nconst Root = styled.div`\n  display: flex;\n  margin-bottom: 12px;\n`\n\nconst Word = styled.p`\n  display: block;\n  min-width: 35%;\n`\n\nconst Button = styled.button`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0;\n  padding: 0 6px;\n  border-radius: 2px;\n  margin-left: 6px;\n  color: ${color.white.normal};\n  background: ${color.primary};\n  z-index: 3;\n`\nconst CheckButton = styled(Button)`\n  background: ${color.black.normal};\n  ${({check}) => check && css`\n    background: ${color.black.normal};\n  `}\n`\n\nconst CheckMask = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 2;\n`\n\nconst Note = styled.input`\n  position: relative;\n  border: 0;\n  border-radius: 0;\n  border-bottom: 1px solid ${color.gray.normal};\n  padding: 2px 4px;\n  background: transparent;\n  z-index: 0;\n  color: ${color.white.normal};\n  &:focus {\n    outline: none;\n  }\n  ${({ active }) => active && css`\n    background: ${color.white.normal};\n    color: ${color.black.normal};\n    z-index: 3;\n  `}\n`\n\n\nexport default WordItem;","import React, { useState, useMemo } from 'react';\nimport styled, { css } from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport WordItem from './WordItem';\nimport wordLibrary from '../../store/wordLibrary';\nimport { color } from '../../constant/color';\nimport { Check, BookBookmark } from '@styled-icons/boxicons-regular';\n\nconst WordSection = () => {\n  const [ isSaved, setIsSaved ] = useState(false);\n  const { currentData: data } = useSelector(state => state.wordLibrary);\n  const wordData = useMemo(() => data, [data]);\n\n  const dispatch = useDispatch(wordLibrary);\n\n  function handleUpdateWordContent(wordData) {\n    dispatch(wordLibrary.actions.updateItemToCurrentData(wordData));\n  }\n\n  function handleSaveToLibrary() {\n    setIsSaved(true);\n    dispatch(wordLibrary.actions.archiveCurrentDataToLibrary());\n    \n    setTimeout(() => {\n      dispatch(wordLibrary.actions.clearCurrentData());\n    }, 1000);\n  }\n\n\n  return (\n    <Root>\n      {\n        wordData?.length !== 0 &&\n        <WordBox save={isSaved}>\n          <Button disabled={isSaved} onClick={handleSaveToLibrary} >\n            { isSaved ? <Check size=\"14\" /> : <BookBookmark size=\"14\" /> }\n          </Button>\n          <List>\n            { wordData?.map((item, i) => \n              <Item key={i}>\n                <WordItem data={item}\n                  onUpdate={handleUpdateWordContent} />\n              </Item>\n            ) }\n          </List>\n        </WordBox>\n      }\n    </Root>\n  )\n};\n\nconst Root = styled.div`\n  padding-top: 40px;\n  padding-bottom: 120px;\n`\n\n\nconst WordBox = styled.div`\n  position: relative;\n  padding: 24px 12px;\n  padding-top: 36px;\n  background: ${color.black.light};\n  overflow: hidden;\n  box-sizing: border-box;\n  transition: transform .3s cubic-bezier(.56,-0.93,.39,.99) .5s;\n  ${({ save }) => save && css`\n    transform: scale(0);\n  `}\n`\nconst Button = styled.button`\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0;\n  padding: 8px 8px;\n  border-radius: 2px;\n  width: 30px;\n  height: 30px;\n  color: ${color.white.normal};\n  background: ${color.black.normal};\n  transition: all 1s ease;\n  &:disabled {\n    background: ${color.black.light};\n  }\n`\n\nconst List = styled.ul`\n\n`\nconst Item = styled.li`\n\n`\n\n\nexport default WordSection;","import React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport WordItem from './WordItem';\nimport wordLibrary from '../../store/wordLibrary';\nimport { color } from '../../constant/color';\n\nconst WordLibrarySection = () => {\n  const { libraryData: data } = useSelector(state => state.wordLibrary);\n  const collectionData = useMemo(() => data, [data]);\n\n  const dispatch = useDispatch(wordLibrary);\n\n  function handleUpdateWordContent(collectionIndex, wordIndex, wordData) {\n    const currentLibrary = JSON.parse(JSON.stringify(collectionData));\n    currentLibrary[collectionIndex].words[wordIndex] = wordData;\n    \n    dispatch(wordLibrary.actions.updateLibraryData(currentLibrary));\n  }\n\n\n  return (\n    <Root>\n      <Title>My Vocabulary</Title>\n      <Wrapper>\n        <List>\n          { collectionData?.map((collection, i) => \n            <Item key={i}>\n              { collection.words.map((word, j) => \n                !word.check &&\n                <WordItem key={j} data={word} advance onUpdate={data => handleUpdateWordContent(i, j, data)} /> )\n              }\n            </Item>\n          ) }\n        </List>\n      </Wrapper>\n    </Root>\n  )\n};\n\nconst Root = styled.div`\n  padding: 0 36px;\n  padding-top: 40px;\n  padding-bottom: 160px;\n  height: 100%;\n  overflow-y: auto;\n  background: ${color.black.light};\n  box-sizing: border-box;\n`\n\nconst Title = styled.div`\n  margin-bottom: 24px;\n  font-size: 14px;\n  font-weight: 600;\n`\n\nconst Wrapper = styled.div`\n`\n\nconst List = styled.ul`\n\n`\nconst Item = styled.li`\n\n`\n\n\nexport default WordLibrarySection;","import React, { useEffect, useState } from 'react'\nimport styled, { css } from 'styled-components';\nimport WordSection from './WordSection';\nimport WordLibrarySection from './WordLibrarySection';\nimport ToggleButton from '../../components/ToggleButton';\nimport { color } from '../../constant/color';\nimport { Book } from '@styled-icons/boxicons-regular';\n\nconst BookPage = ({ currentPage }) => {\n  const [openLibrary, setOpenLibrary] = useState(false);\n\n  function handleOpenLibrary(e) {\n    setOpenLibrary(e.active);\n  }\n  useEffect(() => {\n    currentPage !== 'book' && setOpenLibrary(false);\n  }, [currentPage])\n  \n  return (\n    <>\n      {\n        currentPage === 'book' &&\n        <Root>\n          <Head>\n            <p>Notebook</p>\n            <LibraryToggleButton onClick={handleOpenLibrary}><Book size=\"18\" /></LibraryToggleButton>\n          </Head>\n          <WordSection />\n          <Sidebar open={openLibrary}>\n            <WordLibrarySection open={openLibrary} />\n          </Sidebar>\n        </Root>\n      }\n    </>\n  )\n}\n\nconst Root = styled.div`\n  position: relative;\n  padding: 16px;\n  padding-top: 36px;\n  height: 100vh;\n  max-width: 100%;\n  box-sizing: border-box;\n  color: ${color.white.normal};\n  background: ${color.black.normal};\n  overflow: hidden;\n`\n\nconst Head = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  padding: 0 16px;\n  padding-top: 12px;\n  background: ${color.black.normal};\n  box-shadow: 0px 4px 4px ${color.black.dark};\n  box-sizing: border-box;\n  z-index: 2;\n  p {\n    padding: 6px 0;\n  }\n`\nconst Sidebar = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding-top: 40px;\n  padding-bottom: 120px;\n  transform: translateX(100%);\n  transition: all .3s ease;\n  overflow-y: auto;\n  ${({ open }) => open && css` transform: translateX(0%);`}\n  z-index: 1;\n`\n\nconst LibraryToggleButton = styled(ToggleButton)`\n  margin-right: 4px;\n  padding: 2px 4px;\n  color: ${color.white.normal};\n`\n\n\nexport default BookPage;\n","import React, { useState, useRef } from 'react';\nimport styled, {css} from 'styled-components';\nimport { color } from '../../constant/color';\nimport { Check } from '@styled-icons/boxicons-regular';\n\nconst InputItem = ({ label, value, type=\"text\", frame='bottom', onUpdate }) => {\n  const inputerRef = useRef(null);\n  const [ active, setActive ] = useState(false);\n  \n  function handleFocusInputer() {\n    setActive(true);\n  }\n  \n  function handleSaveInputer() {\n    setActive(false);\n    const value = inputerRef.current.value;\n    onUpdate(value);\n  }\n  return (\n    <Root>\n      <Label>{ label }</Label>\n      <Wrap>\n        <Inputer frame={frame} active={active} ref={inputerRef} type={type} onFocus={handleFocusInputer} defaultValue={value} />\n        { active &&\n          <CheckButton onClick={handleSaveInputer} ><Check size=\"16\" /></CheckButton>\n        }\n        { active && <CheckMask onClick={handleSaveInputer} /> }\n      </Wrap>\n    </Root>\n  )\n};\n\nconst Root = styled.div`\n`\n\nconst Label = styled.div`\n  font-weight: 600;\n  margin-bottom: 8px;\n  font-size: 12px;\n  color: ${color.white.normal};\n`\n\nconst Wrap = styled.div`\n  display: flex;\n  margin-bottom: 12px;\n`\n\nconst Button = styled.button`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0;\n  padding: 0 6px;\n  border-radius: 2px;\n  margin-left: 6px;\n  color: ${color.white.normal};\n  background: ${color.primary};\n  z-index: 3;\n`\nconst CheckButton = styled(Button)`\n  background: ${color.primary};\n`\n\nconst CheckMask = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 2;\n`\n\nconst Inputer = styled.input`\n  position: relative;\n  border: 0;\n  border-radius: 0;\n  ${({ frame }) => frame === 'bottom' && css`\n    border-bottom: 1px solid ${color.gray.normal};\n  `}\n  ${({ frame }) => frame === 'full' && css`\n    border: 1px solid ${color.gray.normal};\n  `}\n  padding: 2px 4px;\n  background: transparent;\n  width: 85%;\n  z-index: 0;\n  color: ${color.white.normal};\n  &:focus {\n    outline: none;\n  }\n  ${({ active }) => active && css`\n    background: ${color.white.normal};\n    color: ${color.black.normal};\n    z-index: 3;\n  `}\n`\n\n\nexport default InputItem;","import React from 'react'\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport configData from '../../store/configData';\nimport InputItem from '../../components/InputItem';\nimport { color } from '../../constant/color';\n\nconst ConfigPage = ({ currentPage }) => {\n  const { translatorKey, youtubeKey } = useSelector(state => state.configData);\n  \n  const dispatch = useDispatch(configData);\n\n  function handleSaveTranslatorKey(value) {\n    dispatch(configData.actions.updateTranslatorKey(value));\n  }\n\n  function handleSaveYoutubeKey(value) {\n    dispatch(configData.actions.updateYoutubeKey(value));\n  }\n  \n  return (\n    <>\n    { currentPage === 'config' &&\n      <Root>\n        <Title>Config</Title>\n        <List>\n          <li><InputItem type=\"password\" frame=\"full\" label=\"Translator Key\" onUpdate={handleSaveTranslatorKey} value={translatorKey} /></li>\n          <li><InputItem type=\"password\" frame=\"full\" label=\"Youtube Key\" onUpdate={handleSaveYoutubeKey} value={youtubeKey} /></li>\n        </List>\n      </Root>\n    }\n    </>\n  )\n}\n\nconst Root = styled.div`\n  position: relative;\n  padding: 16px;\n  height: 100vh;\n  max-width: 100%;\n  overflow-y: auto;\n  box-sizing: border-box;\n`\n\nconst Title = styled.div`\n  margin-bottom: 48px;\n  color: ${color.white.normal};\n`\n\nconst List = styled.ul`\n  > li {\n    margin-bottom: 24px;\n  }\n`\n\nexport default ConfigPage;\n","import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { color } from '../../constant/color';\nimport { Home, Headphone, Book, Cog } from '@styled-icons/boxicons-regular';\n\nfunction BottomMenu({ currentPage, onButtonClick }) {\n\n  const handleClickMenuButton = (e) => {\n    const { current } = e.currentTarget.dataset;\n    onButtonClick(current);\n  }\n  \n  return (\n    <Root>\n      <div className=\"left\">\n        <MenuButton active={currentPage === 'home'} data-current=\"home\" onClick={handleClickMenuButton} ><Home size=\"32\" /></MenuButton>\n        <MenuButton active={currentPage === 'player'} data-current=\"player\" onClick={handleClickMenuButton} ><Headphone size=\"32\" /></MenuButton>\n      </div>\n      <div className=\"right\">\n        <MenuButton active={currentPage === 'book'} data-current=\"book\" onClick={handleClickMenuButton} ><Book size=\"32\" /></MenuButton>\n        <MenuButton active={currentPage === 'config'} data-current=\"config\" onClick={handleClickMenuButton} ><Cog size=\"32\" /></MenuButton>\n      </div>\n    </Root> \n  );\n}\n\nconst Root = styled.div`\n  display: flex;\n  justify-content: space-between;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  padding: 12px 20px;\n  width: 100vw;\n  height: 90px;\n  background: ${color.black.light};\n  box-sizing: border-box;\n  z-index: 1;\n  > .left, > .right {\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    width: 35%\n  }\n`\n\nconst MenuButton = styled.button`\n  background: transparent;\n  border: 0;\n  color: ${color.gray.normal};\n  ${(props) => props.active && css`color: ${color.white.normal};`}\n`\n\nexport default BottomMenu;\n","import React, { useState } from 'react';\nimport GlobalStyle from './components/GlobalStyle';\nimport ConfigGetter from './components/ConfigGetter';\nimport MobileGuideMask from './components/MobileGuideMask';\nimport HowToUseBoard from './components/HowToUseBoard';\nimport Interface from './interface/Main';\nimport PlayerPage from './interface/PlayerPage';\nimport HomePage from './interface/HomePage';\nimport BookPage from './interface/BookPage';\nimport ConfigPage from './interface/ConfigPage';\nimport BottomMenu from './interface/BottomMenu';\n\nfunction App() {\n  const [ currentPage, setCurrentPage ] = useState('home');\n\n  function handleGetCurrentPage(page) {\n    setCurrentPage(page);\n  }\n\n  function handleAutoJumpToPlayerPage() {\n    setCurrentPage('player');\n  }\n\n  \n  return (\n    <div className=\"App\">\n      <GlobalStyle />\n        <ConfigGetter />\n        <MobileGuideMask />\n        <HowToUseBoard />\n        <Interface>\n          <HomePage   currentPage={currentPage} onIdReady={handleAutoJumpToPlayerPage} />\n          <PlayerPage currentPage={currentPage} />\n          <BookPage   currentPage={currentPage} />\n          <ConfigPage currentPage={currentPage} />\n        </Interface>\n        <BottomMenu currentPage={currentPage} onButtonClick={handleGetCurrentPage} /> \n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, combineReducers } from 'redux';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport wordLibrary from './store/wordLibrary';\nimport videoData from './store/videoData';\nimport configData from './store/configData';\nimport guideStatus from './store/guideStatus';\n\nconst reducer = combineReducers({\n  wordLibrary: wordLibrary.reducer,\n  videoData: videoData.reducer,\n  configData: configData.reducer,\n  guideStatus: guideStatus.reducer\n});\n\nconst store = createStore(reducer);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}